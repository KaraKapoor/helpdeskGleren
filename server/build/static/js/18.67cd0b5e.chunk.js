(this.webpackJsonpUI=this.webpackJsonpUI||[]).push([[18],{1473:function(e,t,a){},1600:function(e,t,a){"use strict";a.r(t);var i,n,r,l=a(9),o=a(4),s=a(252),d=a(593),c=a(1),u=a.n(c),m=a(24),b=a(97),j=a(51),h=a(50),f=a.n(h),x=a(126),g=a.n(x),p=a(256),v=(a(1473),a(570)),O=a(456),C=a(716),S=a(839),y=a(717),N=a(566),w=a(567),B=a(584),E=a(746),_=a(755),L=a(835),z=a(164),D=a(747),U=a(176),q=a(27),T=a(124),k=a(490),I=a(2),W=function(e){var t=e.onClose,a=e.editDetails,o=u.a.useState(!1),s=Object(l.a)(o,2),b=(s[0],s[1]),h=u.a.useState(null===a||void 0===a||!a.is_active||a.is_active),x=Object(l.a)(h,2),g=x[0],W=x[1],A=u.a.useState(q.a.user),R=Object(l.a)(A,2),F=R[0],P=R[1],V=u.a.useState(),H=Object(l.a)(V,2),J=(H[0],H[1]),M=u.a.useState(),Y=Object(l.a)(M,2),$=Y[0],G=Y[1],K=u.a.useState(),Q=Object(l.a)(K,2),X=Q[0],Z=Q[1],ee=Object(m.l)(),te=z.a.div(i||(i=Object(j.a)(["\ndisplay: flex;\nalign-items: center;\njustify-content: space-between;\npadding: 1rem;\nfont-size: 1.5rem;\n"]))),ae=z.a.div(n||(n=Object(j.a)(["\ndisplay: grid;\ngrid-template-columns: ",";\npadding: 1rem 1rem 0 1rem;\ngap: 1rem;\n"])),(function(e){return e.divide?"50% 48.4%":"100%"})),ie=(z.a.div(r||(r=Object(j.a)(["\ncolor: red;\nfont-size: 13px;\n"]))),k.b().shape({designation:k.c().max(20,"Designation can not be more than 20 characters long"),firstName:k.c().required("required").max(20,"First-name can not be more than 20 characters long"),lastName:k.c().required("required").max(20,"Last-name can not be more than 20 characters long"),mobile:k.c().required("required").matches(/^(\+?\d{0,4})?\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{4}\)?)?$/,"Phone number is not valid").min(10,"too short").max(13,"too long")}));u.a.useEffect((function(){a&&(W(null===a||void 0===a?void 0:a.is_active),"admin"===(null===a||void 0===a?void 0:a.role)?P(q.a.admin):"teamLead"===(null===a||void 0===a?void 0:a.role)?P(q.a.teamLead):"agent"===(null===a||void 0===a?void 0:a.role)?P(q.a.agent):"user"===(null===a||void 0===a?void 0:a.role)&&P(q.a.user))}),[]);var ne={firstName:null!==a&&void 0!==a&&a.first_name?a.first_name:"",lastName:null!==a&&void 0!==a&&a.last_name?a.last_name:"",email:null!==a&&void 0!==a&&a.email?a.email:"",designation:null!==a&&void 0!==a&&a.designation?a.designation:"",mobile:null!==a&&void 0!==a&&a.mobile?a.mobile:"",role:null!==a&&void 0!==a&&a.role?a.role:"",departmentId:null!==a&&void 0!==a&&a.department_id?a.department_id:""},re=function(e){P(e.target.value)},le=function(e){null!==e&&void 0!==e&&e.target.checked?W(!1):W(!0)};Object(c.useEffect)((function(){Object(T.l)().then((function(e){if(!1===(null===e||void 0===e?void 0:e.status))return f.a.fire({icon:"error",title:"Error",text:e.error,showCloseButton:!0,showConfirmButton:!1,width:400});var t;G(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.departments),J(e.data),Z(null===a||void 0===a?void 0:a.department_id)}))}),[]);var oe=function(e){Z(e.target.value)};return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)("div",{children:Object(I.jsxs)(v.a,{elevation:3,sx:{pt:0,mb:0,minHeight:"50vh"},children:[Object(I.jsxs)(te,{children:[Object(I.jsx)("div",{children:null!==a&&void 0!==a&&a.id?"Edit User":"Add User"}),Object(I.jsx)("div",{onClick:function(e){return!!t&&t(e)&&b(!1)},children:Object(I.jsx)(O.a,{sx:{color:"#59B691",fontSize:"35px !important",cursor:"pointer"},children:"cancelsharp"})})]}),Object(I.jsx)(C.a,{}),Object(I.jsx)(p.a,{onSubmit:function(e){var t={email:e.email,active:g,firstName:e.firstName,lastName:e.lastName,role:F.toString(),designation:e.designation,mobile:e.mobile,departmentId:X};null!==a&&void 0!==a&&a.id&&(t.id=a.id),Object(d.b)(t).then((function(e){return!1===(null===e||void 0===e?void 0:e.status)?f.a.fire({icon:"error",title:"Error",text:e.error,showCloseButton:!0,showConfirmButton:!1,width:400}):(f.a.fire({icon:"success",title:"Success",text:null!==a&&void 0!==a&&a.id?U.a.UPDATED_SUCCESSFULLY:U.a.CREATED_SUCCESSFULLY,showCloseButton:!0,showConfirmButton:!1,width:400}),ee("/users"))}))},initialValues:ne,validationSchema:ie,children:function(e){var t,i=e.values,n=e.errors,r=e.touched,l=e.handleChange,o=e.handleBlur,s=e.handleSubmit;return Object(I.jsxs)("form",{onSubmit:s,children:[Object(I.jsx)(ae,{children:Object(I.jsxs)(S.a,{container:!0,spacing:2,children:[Object(I.jsx)(S.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(I.jsx)(y.a,{fullWidth:!0,size:"large",required:!0,name:"firstName",type:"text",label:"First Name",variant:"outlined",onBlur:o,value:i.firstName,error:Boolean(n.firstName&&r.firstName),helperText:r.firstName&&n.firstName,onChange:l,sx:{mb:1.5}})}),Object(I.jsx)(S.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(I.jsx)(y.a,{fullWidth:!0,size:"large",name:"lastName",required:!0,type:"text",label:"Last Name",variant:"outlined",onBlur:o,value:i.lastName,error:Boolean(n.lastName&&r.lastName),helperText:r.lastName&&n.lastName,onChange:l,sx:{mb:1.5}})}),Object(I.jsx)(S.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(I.jsx)(y.a,{fullWidth:!0,size:"large",name:"email",required:!0,type:"email",label:"Email",disabled:!(null===a||void 0===a||!a.id),variant:"outlined",onBlur:o,value:i.email,onChange:l,sx:{mb:1.5}})}),Object(I.jsx)(S.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(I.jsx)(y.a,{fullWidth:!0,size:"large",name:"mobile",required:!0,type:"text",label:"Mobile",variant:"outlined",onBlur:o,value:i.mobile,onChange:l,error:Boolean(n.mobile&&r.mobile),helperText:r.mobile&&n.mobile,sx:{mb:1.5}})}),Object(I.jsx)(S.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(I.jsx)(y.a,{fullWidth:!0,size:"large",name:"designation",required:!0,type:"text",label:"Designation",variant:"outlined",onBlur:o,value:i.designation,onChange:l,error:Boolean(n.designation&&r.designation),helperText:r.designation&&n.designation,sx:{mb:1.5}})}),Object(I.jsx)(S.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(I.jsxs)(N.a,{fullWidth:!0,children:[Object(I.jsx)(w.a,{required:!0,id:"role",children:"Role"}),Object(I.jsxs)(B.a,{labelId:"role",id:"role",value:F,label:"Role",required:!0,onChange:re,defaultValue:i.role,children:[Object(I.jsx)(E.a,{value:q.a.admin,children:"Admin"}),Object(I.jsx)(E.a,{value:q.a.teamLead,children:"Team Lead"}),Object(I.jsx)(E.a,{value:q.a.agent,children:"Agent"}),Object(I.jsx)(E.a,{value:q.a.user,children:"User"})]})]})}),Object(I.jsx)(S.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(I.jsxs)(N.a,{fullWidth:!0,children:[Object(I.jsx)(w.a,{required:!0,id:"role",children:"Department"}),Object(I.jsx)(B.a,{labelId:"department",id:"department",required:!0,value:X,label:"Department",onChange:oe,defaultValue:X,children:null===$||void 0===$||null===(t=$.filter((function(e){return e.is_active})))||void 0===t?void 0:t.map((function(e,t){return Object(I.jsx)(E.a,{value:e.id,children:e.name},t)}))})]})}),Object(I.jsx)(S.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(I.jsx)(_.a,{control:Object(I.jsx)(L.a,{}),disabled:!(null!==a&&void 0!==a&&a.id),checked:!g,onChange:le,label:"Inactive"})})]})}),Object(I.jsx)("div",{className:"d-flex justify-content-end",children:Object(I.jsx)(D.a,{type:"submit",color:"primary",variant:"contained",sx:{my:2,top:"60",marginRight:"10px",marginTop:"25vh"},children:"Update"})})]})}})]})})})},A=a(17),R=a(5),F=a(790),P=a(866),V=a(471),H=a(840),J=a(326),M=a.n(J),Y=(Object(R.a)(F.a)((function(){return{whiteSpace:"pre","& thead":{"& tr":{"& th":{paddingLeft:0,paddingRight:0}}},"& tbody":{"& tr":{"& td":{paddingLeft:0,textTransform:"capitalize"}}}}})),Object(R.a)(F.a)((function(){return{marginTop:"20px",whiteSpace:"pre","& small":{height:15,width:50,borderRadius:500,boxShadow:"0 0 2px 0 rgba(0, 0, 0, 0.12), 0 2px 2px 0 rgba(0, 0, 0, 0.24)"},"& td":{borderBottom:"none"},"& td:first-of-type":{paddingLeft:"16px !important"},"& th:first-of-type":{paddingLeft:"16px !important"},"& th:nth-of-type(6)":{width:"90px !important"},"& tfoot tr td div:nth-child(1)":{justifyContent:"center",alignItems:"center",flex:"initial",margin:"0.5rem 0"}}}))),$=function(e){var t=e.onEditClick,a=e.onCreateClick,i=(e.setCurrentView,Object(c.useState)([])),n=Object(l.a)(i,2),r=n[0],o=n[1],s=Object(c.useState)(0),u=Object(l.a)(s,2),m=u[0],b=u[1],j=Object(c.useState)(0),h=Object(l.a)(j,2),f=h[0],x=h[1],p=Object(c.useState)(10),v=Object(l.a)(p,2),C=v[0],S=(v[1],function(e,t){b(t)});Object(c.useEffect)((function(){y()}),[m]);var y=function(){Object(d.d)(m,C).then((function(e){var t,a;null===e||void 0===e||null===(t=e.data)||void 0===t||t.pagingData.map((function(e,t){Object.assign(e,{sno:C*m+t+1})})),o(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.pagingData),x(e.data.totalItems)}))};return Object(I.jsxs)(P.a,{width:"100%",overflow:"auto",children:[Object(I.jsx)(V.a,{size:"small",color:"secondary","aria-label":"Add",className:"button addBtn",onClick:function(e,t){a&&a(t)},children:Object(I.jsx)(O.a,{children:"add"})}),Object(I.jsx)(Y,{children:Object(I.jsx)(M.a,{title:"Users",columns:[{title:"User Email",field:"email"},{title:"First Name",field:"firstName"},{title:"Last Name",field:"lastName"},{title:"Active",field:"status"},{title:"Last Login Date",field:"loginDate"}],data:r.map((function(e){return{userId:e.id,email:e.email,firstName:e.first_name,lastName:e.last_name,status:e.is_active,projectId:e.id,loginDate:null!==e.last_login_dt?g()(e.last_login_dt).format(U.a.DATE_FORMAT):"-"}})),actions:[{icon:"edit",tooltip:"Edit User",onClick:function(e,a){t&&t(a.userId)}}],options:{actionsColumnIndex:-1,emptyRowsWhenPaging:!1,showTitle:!1,search:!1,toolbar:!1,pageSizeOptions:[],pageSize:C,tableLayout:"auto",maxBodyHeight:"400px",headerStyle:{fontSize:"14px",backgroundColor:"#222A45",color:"white",fontWeight:"700"}},components:{Pagination:function(e){return Object(I.jsx)(H.a,Object(A.a)(Object(A.a)({},e),{},{count:f,rowsPerPage:C,page:m,onPageChange:S,labelDisplayedRows:function(){return""}}))}}})})]})},G=Object(s.a)("div")((function(e){var t=e.theme;return Object(o.a)({margin:"30px"},t.breakpoints.down("sm"),{margin:"16px"})}));Object(s.a)("span")((function(){return{fontSize:"1rem",fontWeight:"500",textTransform:"capitalize"}})),Object(s.a)("span")((function(e){return{fontSize:"0.875rem",color:e.theme.palette.text.secondary}})),Object(s.a)("h4")((function(e){return{fontSize:"1rem",fontWeight:"500",marginBottom:"16px",textTransform:"capitalize",color:e.theme.palette.text.secondary}})),t.default=function(){var e=Object(c.useState)("Users"),t=Object(l.a)(e,2),a=t[0],i=t[1],n=Object(m.l)(),r=Object(b.d)(),o=Object(l.a)(r,1)[0],s=Object(c.useState)(),u=Object(l.a)(s,2),j=u[0],h=u[1];Object(c.useEffect)((function(){var e;"create-user"===o.get("type")?i("Create"):"edit-user"===(null===o||void 0===o||null===(e=o.get("type"))||void 0===e?void 0:e.split("/")[0])?f(o.get("type").split("/")[1]):(i("Users"),h())}),[o]);var f=function(e){Object(d.g)({id:e}).then((function(e){h(e.data)})),i("Edit"),n({search:"?type=edit-user/".concat(e)})};return Object(I.jsx)(c.Fragment,{children:Object(I.jsxs)(G,{children:["Users"===a&&Object(I.jsx)($,{onEditClick:f,onCreateClick:function(){i("Create"),n({search:"?type=create-user"})},setEditDetails:h,setCurrentView:i}),"Create"===a&&Object(I.jsx)(W,{onClose:function(){i("List"),n({search:""}),h()},editDetails:j}),"Edit"===a&&j&&Object(I.jsx)(W,{onClose:function(){i("List"),n({search:""}),h()},editDetails:j})]})})}}}]);
//# sourceMappingURL=18.67cd0b5e.chunk.js.map