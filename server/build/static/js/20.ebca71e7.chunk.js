(this.webpackJsonpUI=this.webpackJsonpUI||[]).push([[20],{1645:function(e,t,a){},1773:function(e,t,a){"use strict";a.r(t);var i,n,r,l,o=a(5),s=a(3),d=a(298),c=a(699),u=a(0),m=a.n(u),b=a(45),j=a(105),h=a(34),f=a(60),x=a.n(f),g=a(147),p=a.n(g),v=a(302),O=(a(1645),a(669)),C=a(546),S=a(824),N=a(960),w=a(825),y=a(663),E=a(664),_=a(686),B=a(857),L=a(864),D=a(956),z=a(138),U=a(858),k=a(206),T=a(29),I=a(146),q=a(580),W=a(1),A=function(e){var t=e.onClose,a=e.editDetails,s=m.a.useState(!1),d=Object(o.a)(s,2),j=(d[0],d[1]),f=m.a.useState(null===a||void 0===a||!a.is_active||a.is_active),g=Object(o.a)(f,2),p=g[0],A=g[1],R=m.a.useState(T.a.user),F=Object(o.a)(R,2),P=F[0],V=F[1],H=m.a.useState(),J=Object(o.a)(H,2),M=(J[0],J[1]),Y=m.a.useState(),G=Object(o.a)(Y,2),K=G[0],Q=G[1],X=m.a.useState(),Z=Object(o.a)(X,2),$=Z[0],ee=Z[1],te=(Object(b.f)(),z.a.div(i||(i=Object(h.a)(["\ndisplay: flex;\nalign-items: center;\njustify-content: space-between;\npadding: 1rem;\nfont-size: 1.5rem;\n"])))),ae=z.a.div(n||(n=Object(h.a)(["\ndisplay: grid;\ngrid-template-columns: ",";\npadding: 1rem 1rem 0 1rem;\ngap: 1rem;\n"])),(function(e){return e.divide?"50% 48.4%":"100%"})),ie=(z.a.div(r||(r=Object(h.a)(["\ncolor: red;\nfont-size: 13px;\n"]))),z.a.div(l||(l=Object(h.a)(["\n  width:15px;\n  height:15px;\n  border:5px solid red;\n  background-color:red;\n  color:white;\n  border-radius:50%;\n  text-align:center;\n"])))),ne=q.b().shape({designation:q.c().max(20,"Designation can not be more than 20 characters long"),firstName:q.c().required("required").max(20,"First-name can not be more than 20 characters long"),lastName:q.c().required("required").max(20,"Last-name can not be more than 20 characters long")});m.a.useEffect((function(){a&&(A(null===a||void 0===a?void 0:a.is_active),"admin"===(null===a||void 0===a?void 0:a.role)?V(T.a.admin):"teamLead"===(null===a||void 0===a?void 0:a.role)?V(T.a.teamLead):"agent"===(null===a||void 0===a?void 0:a.role)?V(T.a.agent):"user"===(null===a||void 0===a?void 0:a.role)&&V(T.a.user))}),[]);var re={firstName:null!==a&&void 0!==a&&a.first_name?a.first_name:"",lastName:null!==a&&void 0!==a&&a.last_name?a.last_name:"",email:null!==a&&void 0!==a&&a.email?a.email:"",designation:null!==a&&void 0!==a&&a.designation?a.designation:"",mobile:null!==a&&void 0!==a&&a.mobile?a.mobile:"",role:null!==a&&void 0!==a&&a.role?a.role:"",departmentId:null!==a&&void 0!==a&&a.department_id?a.department_id:""},le=function(e){V(e.target.value)},oe=function(e){null!==e&&void 0!==e&&e.target.checked?A(!1):A(!0)};Object(u.useEffect)((function(){Object(I.s)().then((function(e){if(!1===(null===e||void 0===e?void 0:e.status))return x.a.fire({icon:"error",title:"Error",text:e.error,showCloseButton:!0,showConfirmButton:!1,width:400});var t;Q(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.departments),M(e.data),ee(null===a||void 0===a?void 0:a.department_id)}))}),[]);var se=function(e){ee(e.target.value)};return Object(W.jsx)(W.Fragment,{children:Object(W.jsx)("div",{children:Object(W.jsxs)(O.a,{elevation:3,sx:{pt:0,mb:0,minHeight:"50vh"},children:[Object(W.jsxs)(te,{children:[Object(W.jsx)("div",{children:null!==a&&void 0!==a&&a.id?"Edit User":"Add User"}),Object(W.jsx)("div",{onClick:function(e){return!!t&&t(e)&&j(!1)},children:Object(W.jsx)(C.a,{sx:{color:"#59B691",fontSize:"35px !important",cursor:"pointer"},children:"cancelsharp"})})]}),Object(W.jsx)(S.a,{}),Object(W.jsx)(v.a,{onSubmit:function(e){var t={email:e.email,active:p,firstName:e.firstName,lastName:e.lastName,role:P.toString(),designation:e.designation,mobile:e.mobile,departmentId:$};null!==a&&void 0!==a&&a.id&&(t.id=a.id),Object(c.b)(t).then((function(e){if(!1===(null===e||void 0===e?void 0:e.status))return x.a.fire({icon:"error",title:"Error",text:e.error,showCloseButton:!0,showConfirmButton:!1,width:400});x.a.fire({icon:"success",title:"Success",text:null!==a&&void 0!==a&&a.id?k.a.UPDATED_SUCCESSFULLY:k.a.CREATED_SUCCESSFULLY,showCloseButton:!0,showConfirmButton:!1,width:400}),setTimeout((function(){return window.location.href="/users"}),2e3)}))},initialValues:re,validationSchema:ne,children:function(e){var t=e.values,i=e.errors,n=e.touched,r=e.handleChange,l=e.handleBlur,o=e.handleSubmit;return Object(W.jsxs)("form",{onSubmit:o,children:[Object(W.jsx)(ae,{children:Object(W.jsxs)(N.a,{container:!0,spacing:2,children:[Object(W.jsx)(N.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(W.jsx)(w.a,{fullWidth:!0,size:"large",required:!0,name:"firstName",type:"text",label:"First Name",variant:"outlined",onBlur:l,value:t.firstName,error:Boolean(i.firstName&&n.firstName),helperText:n.firstName&&i.firstName,onChange:r,sx:{mb:1.5}})}),Object(W.jsx)(N.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(W.jsx)(w.a,{fullWidth:!0,size:"large",name:"lastName",required:!0,type:"text",label:"Last Name",variant:"outlined",onBlur:l,value:t.lastName,error:Boolean(i.lastName&&n.lastName),helperText:n.lastName&&i.lastName,onChange:r,sx:{mb:1.5}})}),Object(W.jsx)(N.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(W.jsx)(w.a,{fullWidth:!0,size:"large",name:"email",required:!0,type:"email",label:"Email",disabled:!(null===a||void 0===a||!a.id),variant:"outlined",onBlur:l,value:t.email,onChange:r,sx:{mb:1.5}})}),Object(W.jsx)(N.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(W.jsx)(w.a,{fullWidth:!0,size:"large",name:"mobile",type:"text",label:"Mobile",variant:"outlined",onBlur:l,value:t.mobile,onChange:r,helperText:n.mobile&&i.mobile,sx:{mb:1.5}})}),Object(W.jsx)(N.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(W.jsx)(w.a,{fullWidth:!0,size:"large",name:"designation",required:!0,type:"text",label:"Designation",variant:"outlined",onBlur:l,value:t.designation,onChange:r,error:Boolean(i.designation&&n.designation),helperText:n.designation&&i.designation,sx:{mb:1.5}})}),Object(W.jsx)(N.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(W.jsxs)(y.a,{fullWidth:!0,children:[Object(W.jsx)(E.a,{required:!0,id:"role",children:"Role"}),Object(W.jsxs)(_.a,{labelId:"role",id:"role",value:P,label:"Role",required:!0,onChange:le,defaultValue:t.role,children:[Object(W.jsx)(B.a,{value:T.a.admin,children:"Admin"}),Object(W.jsx)(B.a,{value:T.a.teamLead,children:"Team Lead"}),Object(W.jsx)(B.a,{value:T.a.agent,children:"Agent"}),Object(W.jsx)(B.a,{value:T.a.user,children:"User"})]})]})}),Object(W.jsx)(N.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(W.jsxs)(y.a,{fullWidth:!0,children:[Object(W.jsx)(E.a,{required:!0,id:"role",children:"Department"}),Object(W.jsx)(_.a,{labelId:"department",id:"department",required:!0,value:$,label:"Department",onChange:se,defaultValue:$,className:"isactiveDivStyle",children:null===K||void 0===K?void 0:K.map((function(e,t){return Object(W.jsxs)(B.a,{value:e.id,className:"isactive-error",children:[e.name," ",!1===e.is_active?Object(W.jsx)(ie,{}):""]},t)}))})]})}),Object(W.jsx)(N.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(W.jsx)(L.a,{control:Object(W.jsx)(D.a,{}),disabled:!(null!==a&&void 0!==a&&a.id),checked:!p,onChange:oe,label:"Inactive"})})]})}),Object(W.jsx)("div",{className:"d-flex justify-content-end",children:Object(W.jsx)(U.a,{type:"submit",color:"primary",variant:"contained",sx:{my:2,top:"60",marginRight:"10px",marginTop:"25vh"},children:"Update"})})]})}})]})})})},R=a(17),F=a(7),P=a(898),V=a(987),H=a(567),J=a(961),M=a(394),Y=a.n(M),G=(Object(F.a)(P.a)((function(){return{whiteSpace:"pre","& thead":{"& tr":{"& th":{paddingLeft:0,paddingRight:0}}},"& tbody":{"& tr":{"& td":{paddingLeft:0,textTransform:"capitalize"}}}}})),Object(F.a)(P.a)((function(){return{marginTop:"20px",whiteSpace:"pre",thead:{backgroundColor:"rgb(34, 42, 69)"},"thead > tr":{backgroundColor:"rgb(34, 42, 69)"},"& small":{height:15,width:50,borderRadius:500,boxShadow:"0 0 2px 0 rgba(0, 0, 0, 0.12), 0 2px 2px 0 rgba(0, 0, 0, 0.24)"},"& td":{borderBottom:"1px solid rgba(224, 224, 224, 1)"},"& td:first-of-type":{paddingLeft:"16px !important"},"& th:first-of-type":{paddingLeft:"16px !important"},"& th:nth-of-type(6)":{width:"90px !important"},"& tfoot tr td div:nth-child(1)":{justifyContent:"center",alignItems:"center",flex:"initial",margin:"0.5rem 0"}}}))),K=function(e){var t=e.onEditClick,a=e.onCreateClick,i=(e.setCurrentView,Object(u.useState)([])),n=Object(o.a)(i,2),r=n[0],l=n[1],s=Object(u.useState)(0),d=Object(o.a)(s,2),m=d[0],b=d[1],j=Object(u.useState)(0),h=Object(o.a)(j,2),f=h[0],x=h[1],g=Object(u.useState)(10),v=Object(o.a)(g,2),O=v[0],S=(v[1],function(e,t){b(t)});Object(u.useEffect)((function(){N()}),[m]);var N=function(){Object(c.d)(m,O).then((function(e){var t,a;null===e||void 0===e||null===(t=e.data)||void 0===t||t.pagingData.map((function(e,t){Object.assign(e,{sno:O*m+t+1})})),l(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.pagingData),x(e.data.totalItems)}))};return Object(W.jsxs)(V.a,{width:"100%",overflow:"auto",children:[Object(W.jsx)(H.a,{size:"small",color:"secondary","aria-label":"Add",className:"button addBtn",onClick:function(e,t){a&&a(t)},children:Object(W.jsx)(C.a,{children:"add"})}),Object(W.jsx)(G,{children:Object(W.jsx)(Y.a,{title:"Users",columns:[{title:"User Email",field:"email"},{title:"First Name",field:"firstName"},{title:"Last Name",field:"lastName"},{title:"Active",field:"status"},{title:"Last Login Date",field:"loginDate"}],data:r.map((function(e){return{userId:e.id,email:e.email,firstName:e.first_name,lastName:e.last_name,status:e.is_active,projectId:e.id,loginDate:null!==e.last_login_dt?p()(e.last_login_dt).format(k.a.DATE_FORMAT):"-"}})),actions:[{icon:"edit",tooltip:"Edit User",onClick:function(e,a){t&&t(a.userId)}}],options:{actionsColumnIndex:-1,emptyRowsWhenPaging:!1,showTitle:!1,search:!1,toolbar:!1,pageSizeOptions:[],pageSize:O,tableLayout:"auto",maxBodyHeight:"400px",headerStyle:{fontSize:"14px",backgroundColor:"#222A45",color:"white",fontWeight:"700"}},components:{Pagination:function(e){return Object(W.jsx)(J.a,Object(R.a)(Object(R.a)({},e),{},{count:f,rowsPerPage:O,page:m,onPageChange:S,labelDisplayedRows:function(){return""}}))}}})})]})},Q=Object(d.a)("div")((function(e){var t=e.theme;return Object(s.a)({margin:"30px"},t.breakpoints.down("sm"),{margin:"16px"})}));Object(d.a)("span")((function(){return{fontSize:"1rem",fontWeight:"500",textTransform:"capitalize"}})),Object(d.a)("span")((function(e){return{fontSize:"0.875rem",color:e.theme.palette.text.secondary}})),Object(d.a)("h4")((function(e){return{fontSize:"1rem",fontWeight:"500",marginBottom:"16px",textTransform:"capitalize",color:e.theme.palette.text.secondary}})),t.default=function(){var e=Object(u.useState)("Users"),t=Object(o.a)(e,2),a=t[0],i=t[1],n=Object(b.f)(),r=Object(j.d)(),l=Object(o.a)(r,1)[0],s=Object(u.useState)(),d=Object(o.a)(s,2),m=d[0],h=d[1];Object(u.useEffect)((function(){var e;"create-user"===l.get("type")?i("Create"):"edit-user"===(null===l||void 0===l||null===(e=l.get("type"))||void 0===e?void 0:e.split("/")[0])?f(l.get("type").split("/")[1]):(i("Users"),h())}),[l]);var f=function(e){Object(c.g)({id:e}).then((function(e){h(e.data)})),i("Edit"),n({search:"?type=edit-user/".concat(e)})};return Object(W.jsx)(u.Fragment,{children:Object(W.jsxs)(Q,{children:["Users"===a&&Object(W.jsx)(K,{onEditClick:f,onCreateClick:function(){i("Create"),n({search:"?type=create-user"})},setEditDetails:h,setCurrentView:i}),"Create"===a&&Object(W.jsx)(A,{onClose:function(){i("List"),n({search:""}),h()},editDetails:m}),"Edit"===a&&m&&Object(W.jsx)(A,{onClose:function(){i("List"),n({search:""}),h()},editDetails:m})]})})}}}]);
//# sourceMappingURL=20.ebca71e7.chunk.js.map