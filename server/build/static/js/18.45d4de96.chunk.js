(this.webpackJsonpUI=this.webpackJsonpUI||[]).push([[18],{1473:function(e,t,a){},1600:function(e,t,a){"use strict";a.r(t);var i,n,l,r=a(9),o=a(4),s=a(252),d=a(593),c=a(1),u=a.n(c),m=a(24),j=a(97),b=a(51),h=a(50),f=a.n(h),v=a(125),x=a.n(v),g=a(256),p=(a(1473),a(570)),O=a(456),C=a(716),S=a(839),y=a(717),w=a(566),E=a(567),_=a(584),N=a(746),L=a(755),z=a(835),B=a(164),D=a(747),U=a(176),k=a(27),I=a(156),T=a(490),W=a(2),A=function(e){var t=e.onClose,a=e.editDetails,o=u.a.useState(!1),s=Object(r.a)(o,2),j=(s[0],s[1]),h=u.a.useState(null===a||void 0===a||!a.is_active||a.is_active),v=Object(r.a)(h,2),x=v[0],A=v[1],q=u.a.useState(k.a.user),R=Object(r.a)(q,2),F=R[0],P=R[1],V=u.a.useState(),H=Object(r.a)(V,2),J=(H[0],H[1]),M=u.a.useState(),Y=Object(r.a)(M,2),G=Y[0],K=Y[1],Q=u.a.useState(),X=Object(r.a)(Q,2),Z=X[0],$=X[1],ee=Object(m.l)(),te=B.a.div(i||(i=Object(b.a)(["\ndisplay: flex;\nalign-items: center;\njustify-content: space-between;\npadding: 1rem;\nfont-size: 1.5rem;\n"]))),ae=B.a.div(n||(n=Object(b.a)(["\ndisplay: grid;\ngrid-template-columns: ",";\npadding: 1rem 1rem 0 1rem;\ngap: 1rem;\n"])),(function(e){return e.divide?"50% 48.4%":"100%"})),ie=(B.a.div(l||(l=Object(b.a)(["\ncolor: red;\nfont-size: 13px;\n"]))),T.b().shape({designation:T.c().max(20,"Designation can not be more than 20 characters long")}));u.a.useEffect((function(){a&&(A(null===a||void 0===a?void 0:a.is_active),"admin"===(null===a||void 0===a?void 0:a.role)?P(k.a.admin):"teamLead"===(null===a||void 0===a?void 0:a.role)?P(k.a.teamLead):"agent"===(null===a||void 0===a?void 0:a.role)?P(k.a.agent):"user"===(null===a||void 0===a?void 0:a.role)&&P(k.a.user))}),[]);var ne={firstName:null!==a&&void 0!==a&&a.first_name?a.first_name:"",lastName:null!==a&&void 0!==a&&a.last_name?a.last_name:"",email:null!==a&&void 0!==a&&a.email?a.email:"",designation:null!==a&&void 0!==a&&a.designation?a.designation:"",mobile:null!==a&&void 0!==a&&a.mobile?a.mobile:"",role:null!==a&&void 0!==a&&a.role?a.role:"",departmentId:null!==a&&void 0!==a&&a.department_id?a.department_id:""},le=function(e){P(e.target.value)},re=function(e){null!==e&&void 0!==e&&e.target.checked?A(!1):A(!0)};Object(c.useEffect)((function(){Object(I.l)().then((function(e){if(!1===(null===e||void 0===e?void 0:e.status))return f.a.fire({icon:"error",title:"Error",text:e.error,showCloseButton:!0,showConfirmButton:!1,width:400});var t;K(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.departments),J(e.data),$(null===a||void 0===a?void 0:a.department_id)}))}),[]);var oe=function(e){$(e.target.value)};return Object(W.jsx)(W.Fragment,{children:Object(W.jsx)("div",{children:Object(W.jsxs)(p.a,{elevation:3,sx:{pt:0,mb:0,minHeight:"50vh"},children:[Object(W.jsxs)(te,{children:[Object(W.jsx)("div",{children:null!==a&&void 0!==a&&a.id?"Edit User":"Add User"}),Object(W.jsx)("div",{onClick:function(e){return!!t&&t(e)&&j(!1)},children:Object(W.jsx)(O.a,{sx:{color:"#59B691",fontSize:"35px !important",cursor:"pointer"},children:"cancelsharp"})})]}),Object(W.jsx)(C.a,{}),Object(W.jsx)(g.a,{onSubmit:function(e){var t={email:e.email,active:x,firstName:e.firstName,lastName:e.lastName,role:F.toString(),designation:e.designation,mobile:e.mobile,departmentId:Z};null!==a&&void 0!==a&&a.id&&(t.id=a.id),Object(d.b)(t).then((function(e){return!1===(null===e||void 0===e?void 0:e.status)?f.a.fire({icon:"error",title:"Error",text:e.error,showCloseButton:!0,showConfirmButton:!1,width:400}):(f.a.fire({icon:"success",title:"Success",text:null!==a&&void 0!==a&&a.id?U.a.UPDATED_SUCCESSFULLY:U.a.CREATED_SUCCESSFULLY,showCloseButton:!0,showConfirmButton:!1,width:400}),ee("/users"))}))},initialValues:ne,validationSchema:ie,children:function(e){var t,i=e.values,n=e.errors,l=e.touched,r=e.handleChange,o=e.handleBlur,s=e.handleSubmit;return Object(W.jsxs)("form",{onSubmit:s,children:[Object(W.jsx)(ae,{children:Object(W.jsxs)(S.a,{container:!0,spacing:2,children:[Object(W.jsx)(S.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(W.jsx)(y.a,{fullWidth:!0,size:"large",required:!0,name:"firstName",type:"text",label:"First Name",variant:"outlined",onBlur:o,value:i.firstName,onChange:r,sx:{mb:1.5}})}),Object(W.jsx)(S.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(W.jsx)(y.a,{fullWidth:!0,size:"large",name:"lastName",required:!0,type:"text",label:"Last Name",variant:"outlined",onBlur:o,value:i.lastName,onChange:r,sx:{mb:1.5}})}),Object(W.jsx)(S.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(W.jsx)(y.a,{fullWidth:!0,size:"large",name:"email",required:!0,type:"email",label:"Email",disabled:!(null===a||void 0===a||!a.id),variant:"outlined",onBlur:o,value:i.email,onChange:r,sx:{mb:1.5}})}),Object(W.jsx)(S.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(W.jsx)(y.a,{fullWidth:!0,size:"large",name:"mobile",required:!0,type:"text",label:"Mobile",variant:"outlined",onBlur:o,value:i.mobile,onChange:r,sx:{mb:1.5}})}),Object(W.jsx)(S.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(W.jsx)(y.a,{fullWidth:!0,size:"large",name:"designation",required:!0,type:"text",label:"Designation",variant:"outlined",onBlur:o,value:i.designation,onChange:r,error:Boolean(n.designation&&l.designation),helperText:l.designation&&n.designation,sx:{mb:1.5}})}),Object(W.jsx)(S.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(W.jsxs)(w.a,{fullWidth:!0,children:[Object(W.jsx)(E.a,{required:!0,id:"role",children:"Role"}),Object(W.jsxs)(_.a,{labelId:"role",id:"role",value:F,label:"Role",required:!0,onChange:le,defaultValue:i.role,children:[Object(W.jsx)(N.a,{value:k.a.admin,children:"Admin"}),Object(W.jsx)(N.a,{value:k.a.teamLead,children:"Team Lead"}),Object(W.jsx)(N.a,{value:k.a.agent,children:"Agent"}),Object(W.jsx)(N.a,{value:k.a.user,children:"User"})]})]})}),Object(W.jsx)(S.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(W.jsxs)(w.a,{fullWidth:!0,children:[Object(W.jsx)(E.a,{required:!0,id:"role",children:"Department"}),Object(W.jsx)(_.a,{labelId:"department",id:"department",required:!0,value:Z,label:"Department",onChange:oe,defaultValue:Z,children:null===G||void 0===G||null===(t=G.filter((function(e){return e.is_active})))||void 0===t?void 0:t.map((function(e,t){return Object(W.jsx)(N.a,{value:e.id,children:e.name},t)}))})]})}),Object(W.jsx)(S.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(W.jsx)(L.a,{control:Object(W.jsx)(z.a,{}),disabled:!(null!==a&&void 0!==a&&a.id),checked:!x,onChange:re,label:"Inactive"})})]})}),Object(W.jsx)("div",{className:"d-flex justify-content-end",children:Object(W.jsx)(D.a,{type:"submit",color:"primary",variant:"contained",sx:{my:2,top:"60",marginRight:"10px",marginTop:"25vh"},children:"Update"})})]})}})]})})})},q=a(17),R=a(5),F=a(790),P=a(866),V=a(471),H=a(840),J=a(326),M=a.n(J),Y=(Object(R.a)(F.a)((function(){return{whiteSpace:"pre","& thead":{"& tr":{"& th":{paddingLeft:0,paddingRight:0}}},"& tbody":{"& tr":{"& td":{paddingLeft:0,textTransform:"capitalize"}}}}})),Object(R.a)(F.a)((function(){return{marginTop:"20px",whiteSpace:"pre","& small":{height:15,width:50,borderRadius:500,boxShadow:"0 0 2px 0 rgba(0, 0, 0, 0.12), 0 2px 2px 0 rgba(0, 0, 0, 0.24)"},"& td":{borderBottom:"none"},"& td:first-of-type":{paddingLeft:"16px !important"},"& th:first-of-type":{paddingLeft:"16px !important"},"& th:nth-of-type(6)":{width:"90px !important"},"& tfoot tr td div:nth-child(1)":{justifyContent:"center",alignItems:"center",flex:"initial",margin:"0.5rem 0"}}}))),G=function(e){var t=e.onEditClick,a=e.onCreateClick,i=(e.setCurrentView,Object(c.useState)([])),n=Object(r.a)(i,2),l=n[0],o=n[1],s=Object(c.useState)(0),u=Object(r.a)(s,2),m=u[0],j=u[1],b=Object(c.useState)(0),h=Object(r.a)(b,2),f=h[0],v=h[1],g=Object(c.useState)(10),p=Object(r.a)(g,2),C=p[0],S=(p[1],function(e,t){j(t)});Object(c.useEffect)((function(){y()}),[m]);var y=function(){Object(d.d)(m,C).then((function(e){var t,a;null===e||void 0===e||null===(t=e.data)||void 0===t||t.pagingData.map((function(e,t){Object.assign(e,{sno:C*m+t+1})})),o(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.pagingData),v(e.data.totalItems)}))};return Object(W.jsxs)(P.a,{width:"100%",overflow:"auto",children:[Object(W.jsx)(V.a,{size:"small",color:"secondary","aria-label":"Add",className:"button addBtn",onClick:function(e,t){a&&a(t)},children:Object(W.jsx)(O.a,{children:"add"})}),Object(W.jsx)(Y,{children:Object(W.jsx)(M.a,{title:"Users",columns:[{title:"User Email",field:"email"},{title:"First Name",field:"firstName"},{title:"Last Name",field:"lastName"},{title:"Active",field:"status"},{title:"Last Login Date",field:"loginDate"}],data:l.map((function(e){return{userId:e.id,email:e.email,firstName:e.first_name,lastName:e.last_name,status:e.is_active,projectId:e.id,loginDate:null!==e.last_login_dt?x()(e.last_login_dt).format(U.a.DATE_FORMAT):"-"}})),actions:[{icon:"edit",tooltip:"Edit User",onClick:function(e,a){t&&t(a.userId)}}],options:{actionsColumnIndex:-1,emptyRowsWhenPaging:!1,showTitle:!1,search:!1,toolbar:!1,pageSizeOptions:[],pageSize:C,tableLayout:"auto",maxBodyHeight:"400px",headerStyle:{fontSize:"14px",backgroundColor:"#222A45",color:"white",fontWeight:"700"}},components:{Pagination:function(e){return Object(W.jsx)(H.a,Object(q.a)(Object(q.a)({},e),{},{count:f,rowsPerPage:C,page:m,onPageChange:S,labelDisplayedRows:function(){return""}}))}}})})]})},K=Object(s.a)("div")((function(e){var t=e.theme;return Object(o.a)({margin:"30px"},t.breakpoints.down("sm"),{margin:"16px"})}));Object(s.a)("span")((function(){return{fontSize:"1rem",fontWeight:"500",textTransform:"capitalize"}})),Object(s.a)("span")((function(e){return{fontSize:"0.875rem",color:e.theme.palette.text.secondary}})),Object(s.a)("h4")((function(e){return{fontSize:"1rem",fontWeight:"500",marginBottom:"16px",textTransform:"capitalize",color:e.theme.palette.text.secondary}})),t.default=function(){var e=Object(c.useState)("Users"),t=Object(r.a)(e,2),a=t[0],i=t[1],n=Object(m.l)(),l=Object(j.d)(),o=Object(r.a)(l,1)[0],s=Object(c.useState)(),u=Object(r.a)(s,2),b=u[0],h=u[1];Object(c.useEffect)((function(){var e;"create-user"===o.get("type")?i("Create"):"edit-user"===(null===o||void 0===o||null===(e=o.get("type"))||void 0===e?void 0:e.split("/")[0])?f(o.get("type").split("/")[1]):(i("Users"),h())}),[o]);var f=function(e){Object(d.g)({id:e}).then((function(e){h(e.data)})),i("Edit"),n({search:"?type=edit-user/".concat(e)})};return Object(W.jsx)(c.Fragment,{children:Object(W.jsxs)(K,{children:["Users"===a&&Object(W.jsx)(G,{onEditClick:f,onCreateClick:function(){i("Create"),n({search:"?type=create-user"})},setEditDetails:h,setCurrentView:i}),"Create"===a&&Object(W.jsx)(A,{onClose:function(){i("List"),n({search:""}),h()},editDetails:b}),"Edit"===a&&b&&Object(W.jsx)(A,{onClose:function(){i("List"),n({search:""}),h()},editDetails:b})]})})}}}]);
//# sourceMappingURL=18.45d4de96.chunk.js.map