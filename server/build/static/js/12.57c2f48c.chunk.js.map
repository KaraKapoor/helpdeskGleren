{"version":3,"sources":["app/views/bugReport/bugReport.jsx","app/views/bugReport/bugReportView.jsx"],"names":["BugReport","props","useState","issueDescription","setIssueDescription","image_data","setImageData","AttachmentsId","SetAttachmentId","React","fileLoading","setfileLoading","navigate","useNavigate","console","log","onChangeFile","event","file","target","files","data","FormData","append","fileUpload","then","resp","id","status","Swal","fire","icon","title","text","error","showCloseButton","showConfirmButton","width","size","type","deleteFunction","value","splice","useEffect","Box","overflow","className","TextareaAutosize","style","outline","borderRadius","name","placeholder","onChange","minRows","label","handleBlur","TextField","fullWidth","variant","onBlur","sx","mt","mb","Card","px","py","InputLabel","position","backgroundColor","top","left","zIndex","height","map","obj","index","original_name","onClick","Icon","e","Download","keyName","key","downloadFile","r","window","open","LoadingButton","formData","reportBug","color","ContentBox","styled","theme","margin","breakpoints","down","BugReportView","Grid","container","spacing","item","lg","md","sm","xs"],"mappings":"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","file":"static/js/12.57c2f48c.chunk.js","sourcesContent":["import React,{ Fragment,useEffect,useState } from \"react\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport {Box,Card,InputLabel,Icon,TextareaAutosize,TextField,} from \"@mui/material\";\r\nimport { reportBug } from \"app/services/adminService\";import { useNavigate } from \"react-router-dom\";\r\nimport Swal from \"sweetalert2\";\r\nimport { Formik } from \"formik\";\r\nimport {downloadFile,fileUpload} from \"app/services/ticketService\";\r\nimport CircularProgress from \"../../components/MatxLoading\";\r\nimport './bugReport.css';\r\n\r\nconst BugReport = (props) => {\r\n    const [issueDescription, setIssueDescription] = useState();\r\n    const [image_data, setImageData] = useState([]);\r\n    const [AttachmentsId,SetAttachmentId] = useState([]);\r\n    const [fileLoading, setfileLoading] = React.useState(false);\r\n    const navigate = useNavigate();\r\n    const handleChange = (event) => {\r\n        setIssueDescription(event.target.value);\r\n      };\r\n    \r\n    const submitBug=()=>{\r\n        if (!issueDescription) {\r\n            return Swal.fire({\r\n                icon: 'warning',\r\n                title: 'Warning',\r\n                text: \"Please enter your Issue Description\",\r\n                showCloseButton: true,\r\n                showConfirmButton: false,\r\n                width: 400,\r\n            })\r\n        }\r\n        try {\r\n            const formData={\r\n                \"issueDescription\":issueDescription,\r\n                \"attachment\":AttachmentsId\r\n            }\r\n            reportBug(formData).then((data)=>{\r\n                if (data.status === false) {\r\n                    return Swal.fire({\r\n                        icon: 'error',\r\n                        title: 'Error',\r\n                        text: data.error,\r\n                        showCloseButton: true,\r\n                        showConfirmButton: false,\r\n                        width: 400,\r\n                    })\r\n                } else {\r\n                    Swal.fire({\r\n                        icon: 'success',\r\n                        title: 'Success',\r\n                        text: \"Bug Reported Successfully\",\r\n                        showCloseButton: true,\r\n                        showConfirmButton: false,\r\n                        width: 400,\r\n                    })\r\n                    navigate('/dashboard/default')\r\n                    return null;\r\n    \r\n                }\r\n            })\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n    console.log(AttachmentsId,\"AttachmentsId\");\r\n  const onChangeFile = (event) => {\r\n    setfileLoading(true);\r\n    let file = event.target.files[0];\r\n    if (!event?.target?.files[0]) {\r\n      return null;\r\n    }\r\n    let data = new FormData();\r\n    data.append(\"file\", event?.target?.files[0]);\r\n    fileUpload(data).then((resp) => {\r\n      SetAttachmentId(AttachmentsId => [...AttachmentsId,resp.data.id])\r\n      if (resp?.status === false) {\r\n        return Swal.fire({\r\n          icon: \"error\",\r\n          title: \"Error\",\r\n          text: resp.error,\r\n          showCloseButton: true,\r\n          showConfirmButton: false,\r\n          width: 400,\r\n        });\r\n      }\r\n       else if (file.size > 10e6) {\r\n        setfileLoading(false);\r\n        return Swal.fire({\r\n            icon: \"error\",\r\n            title: \"Please upload a file smaller than 10 MB\",\r\n            text: resp.error,\r\n            showCloseButton: true,\r\n            showConfirmButton: false,\r\n            width: 400,\r\n          });\r\n      }\r\n      else if(file?.type === \"image/jpeg\" || file?.type === \"image/jpg\" || file?.type === \"image/png\" || file.type === \"application/pdf\"){\r\n        console.log(resp,\"resp\");\r\n        setImageData( image_data => [...image_data,resp.data])\r\n      }\r\n      else{\r\n        setfileLoading(false);\r\n        return Swal.fire({\r\n          icon: \"error\",\r\n          title: \"Error\",\r\n          text: \"File Format Not Supported. Please try with PDF or JPEG/JPG Format.\",\r\n          showCloseButton: true,\r\n          showConfirmButton: false,\r\n          width: 400,\r\n        });\r\n      }\r\n      setfileLoading(false);\r\n    });\r\n  };\r\n  const deleteFunction =(value)=>{\r\n    image_data?.splice(value,1)\r\n    setImageData( image_data => [...image_data])\r\n  }\r\n  useEffect(()=>{\r\n    deleteFunction()\r\n  },[])\r\n    return (\r\n        <Box width=\"100%\" overflow=\"auto\">\r\n            <label className=\"issueDescription\">Issue Description</label><br></br>\r\n            <TextareaAutosize\r\n              type=\"textarea\"\r\n              style={{ width: '100%',outline:'none',borderRadius:\"5px\" }}\r\n              name=\"issueDescription\"\r\n              placeholder=\"Please tell us in some words which issue you are facing\"\r\n              id=\"standard-basic\"\r\n              value={issueDescription}\r\n              onChange={handleChange}\r\n              minRows={20}\r\n              label=\"Issue Description (Min length 4, Max length 9)\"\r\n      />\r\n      <Formik>\r\n        {({\r\n          handleBlur,\r\n        }) => (\r\n          <>\r\n            <TextField\r\n              fullWidth\r\n              size=\"large\"\r\n              name=\"files\"\r\n              type=\"file\"\r\n              variant=\"outlined\"\r\n              onBlur={handleBlur}\r\n              onChange={onChangeFile}\r\n              sx={{ mt: 1, mb:2}}\r\n              value=\"\"\r\n              className=\"inputStyling\"\r\n            />\r\n            <Card sx={{ px: 3, py: 2, mb: 3 }}>\r\n              <InputLabel>Attachments</InputLabel>\r\n                     {fileLoading && \r\n                      <div style={{position: 'fixed',backgroundColor: '#00000075',width:'100%',top:'0',left:'0',zIndex:'999',height:'100vh'}}>\r\n                      <CircularProgress ></CircularProgress>                                          \r\n                      </div>  }\r\n                  <Fragment>\r\n                    {image_data.map((obj,index)=>{\r\n                    return(\r\n                      <>\r\n                      <div>\r\n                      <span className={obj.original_name ? \"Datastyling\" : \"\"}>{obj.original_name}</span>\r\n                      {\r\n                        obj ? (\r\n                          <>\r\n                          <span\r\n                        onClick={() => {\r\n                        deleteFunction(index)\r\n                        }}\r\n                      >\r\n                        <Icon className=\"icon deleteIcon\" >delete</Icon>\r\n                      </span>\r\n                      <span\r\n                        onClick={(e) => {\r\n                          const Download = {\r\n                            keyName: obj.key,\r\n                          };\r\n                          downloadFile(Download).then((r) => {\r\n                            window.open(r.data, \"_blank\");\r\n                          });\r\n                        }}\r\n                      >\r\n                        <Icon className=\"icon deleteIcon\" >file_download</Icon>\r\n                      </span>\r\n                          </>\r\n                        ) : \"\"\r\n                      }\r\n                    </div>\r\n                    </>\r\n                    )\r\n                     })}\r\n                  </Fragment>\r\n            </Card>\r\n          </>\r\n        )}\r\n      </Formik>\r\n      <LoadingButton\r\n        type=\"submit\"\r\n        onClick={submitBug}\r\n        color=\"primary\"\r\n        variant=\"contained\"\r\n        sx={{ mb: 2, mt: 3 }}\r\n      >\r\n        Submit\r\n      </LoadingButton>\r\n    </Box>\r\n  );\r\n};\r\nexport default BugReport;","import { Grid } from \"@mui/material\"\r\nimport { styled } from \"@mui/system\"\r\nimport { Fragment, useState } from \"react\"\r\nimport BugReport from \"./bugReport\"\r\n\r\n\r\nconst ContentBox = styled('div')(({ theme }) => ({\r\n    margin: '30px',\r\n    [theme.breakpoints.down('sm')]: {\r\n        margin: '16px',\r\n    },\r\n}))\r\n\r\n\r\nconst BugReportView = () => {\r\n    return (\r\n        <Fragment>\r\n            <ContentBox>\r\n                <Grid container spacing={3}>\r\n                    <Grid item lg={12} md={12} sm={12} xs={12}>\r\n                        <BugReport></BugReport>\r\n                    </Grid>\r\n                </Grid>\r\n            </ContentBox>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default BugReportView"],"sourceRoot":""}